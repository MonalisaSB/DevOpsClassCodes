pipeline{
    agent any
    stages{
        stage("git checkouot"){
            steps{
                echo "git checking out"
                git url: "https://github.com/monalisasb/DevOpsClassCodes"
            }
        }
        stage("compile the code"){
            steps{
                
                sh 'mvn compile'
              
            }
        }
        stage("testing the code"){
            steps{
                sh 'mvn test'
            }
        }
        stage("quality assurance of the code"){
            steps{
                sh 'mvn checkstyle:checkstyle'
                recordIssues sourceCodeRetention: 'LAST_BUILD', tools: [checkStyle()]
            }
        }
        stage("converting the code to package"){
            steps{
                sh "mvn package"
            }
        }
        stage("deploy the project in tomcat"){
            steps{
                sh "sudo cp /var/lib/jenkins/workspace/addressbook-pipeline/target/addressbook.war /opt/apache-tomcat-8.5.100/webapps"
            }
        }
    }
}
